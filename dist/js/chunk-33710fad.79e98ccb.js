(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33710fad"],{"13f7":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"article-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("my-breadcrumb",[t._v("内容管理")])],1),a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-radio-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-radio",{attrs:{label:null}},[t._v("全部")]),a("el-radio",{attrs:{label:0}},[t._v("草稿")]),a("el-radio",{attrs:{label:1}},[t._v("待审核")]),a("el-radio",{attrs:{label:2}},[t._v("审核通过")]),a("el-radio",{attrs:{label:3}},[t._v("审核失败")]),a("el-radio",{attrs:{label:4}},[t._v("已删除")])],1)],1),a("vmodel1",{model:{value:t.form.channelId,callback:function(e){t.$set(t.form,"channelId",e)},expression:"form.channelId"}}),a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.hQuery}},[t._v("查询")])],1)],1)],1),a("el-card",{staticStyle:{"margin-top":"20px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[t._v(" 根据筛选条件查询到"+t._s(t.total_count)+"条数据,当前是第"+t._s(t.curPage)+"页： ")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.articles}},[a("el-table-column",{attrs:{label:"封面"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"150px",height:"100px"},attrs:{src:e.row.cover.images[0],lazy:""}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),a("span",{staticClass:"dot"},[t._v("...")])])])]}}])}),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?a("el-tag",[t._v("草稿")]):1===e.row.status?a("el-tag",{attrs:{type:"info"}},[t._v("待审核")]):2===e.row.status?a("el-tag",{attrs:{type:"success"}},[t._v("审核通过")]):3===e.row.status?a("el-tag",{attrs:{type:"warning"}},[t._v("审核失败")]):4===e.row.status?a("el-tag",{attrs:{type:"danger"}},[t._v("已删除")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"pubdate",label:"发布时间"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary",circle:""},on:{click:function(a){return t.hEdit(e.row)}}}),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.hDelete(e.row)}}})]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{disabled:t.loading,background:"",layout:"prev, pager, next","page-size":10,total:t.total_count},on:{"current-change":t.hPageChange}})],1)],1)},n=[],o=(a("d3b7"),a("25f0"),a("c20d")),r=a("663f"),s=a("8691"),i={name:"ArticleIndex",props:{},data:function(){return{loading:!1,form:{channelId:null,date:null,status:null},curPage:1,total_count:0,channels:[],articles:[]}},components:{MyBreadcrumb:r["a"],vmodel1:o["a"]},created:function(){this.loadArticles(),this.loadChanels()},methods:{loadChanels:function(){var t=this;Object(s["d"])().then((function(e){t.channels=e.data.data.channels}))},loadArticles:function(){var t=this,e=null;this.form.date&&(e=this.form.date[0]);var a=this.form.date&&this.form.date[1],l=null;this.form.channelId&&(l=this.form.channelId),this.loading=!0,Object(s["e"])({channel_id:l,status:this.form.status,begin_pubdate:e,end_pubdate:a,page:this.curPage}).then((function(e){console.log("获取文章的文章",e),t.articles=e.data.data.results,t.total_count=e.data.data.total_count,t.loading=!1})).catch((function(e){console.log(e),t.$message({message:"查询失败，参数无效",type:"error"}),t.loading=!1}))},hQuery:function(){this.curPage=1,this.loadArticles()},hEdit:function(t){var e=t.id.toString();this.$router.push("/editArticle/"+e)},hDelete:function(t){var e=this;console.log("要删除的数据如下",t);var a=t.id.toString();console.log("要删除的文章的编号是",a),this.$confirm("你确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["b"])(a).then((function(t){e.$message({message:"删除成功！",type:"success"}),e.loadArticles()})).catch((function(t){e.$message({message:"删除失败",type:"error"}),console.dir(t)}))})).catch((function(){}))},hPageChange:function(t){console.log(t),this.curPage=t,this.loadArticles()}}},c=i,d=a("2877"),u=Object(d["a"])(c,l,n,!1,null,"5626070d",null);e["default"]=u.exports},"25f0":function(t,e,a){"use strict";var l=a("6eeb"),n=a("825a"),o=a("d039"),r=a("ad6d"),s="toString",i=RegExp.prototype,c=i[s],d=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u=c.name!=s;(d||u)&&l(RegExp.prototype,s,(function(){var t=n(this),e=String(t.source),a=t.flags,l=String(void 0===a&&t instanceof RegExp&&!("flags"in i)?r.call(t):a);return"/"+e+"/"+l}),{unsafe:!0})},ad6d:function(t,e,a){"use strict";var l=a("825a");t.exports=function(){var t=l(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}}}]);
//# sourceMappingURL=chunk-33710fad.79e98ccb.js.map